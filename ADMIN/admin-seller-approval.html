<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIYALA - Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ†</title>
    <style>
        /* Ø£Ø¶Ù CSS Ù‡Ù†Ø§ */
    </style>
</head>

<body>
    <h1>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯</h1>

    <div id="pendingRequests">
        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† localStorage -->
    </div>

    <script>
        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        function loadPendingRequests() {
            const requests = [];

            // ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ù‡Ù†Ø§ Ø³ØªØ¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            // Ù„Ù„ØªØ¯Ø±ÙŠØ¨ØŒ Ø³Ù†Ø³ØªØ®Ø¯Ù… localStorage
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('biyala_seller_application_')) {
                    const request = JSON.parse(localStorage.getItem(key));
                    requests.push(request);
                }
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            const container = document.getElementById('pendingRequests');
            container.innerHTML = '';

            requests.forEach((request, index) => {
                const requestCard = `
                    <div style="border: 1px solid #ccc; padding: 15px; margin: 10px; border-radius: 8px;">
                        <h3>${request.brand} - ${request.requestId}</h3>
                        <p>Ø§Ù„Ù…Ø§Ù„Ùƒ: ${request.owner}</p>
                        <p>Ø§Ù„Ø¨Ø±ÙŠØ¯: ${request.email}</p>
                        <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(request.joinedAt).toLocaleString('ar-EG')}</p>
                        <p>Ø§Ù„Ø­Ø§Ù„Ø©: <span style="color: ${request.status === 'pending' ? 'orange' : 'green'}">
                            ${request.status === 'pending' ? 'â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©' : 'âœ… Ù…Ø¹ØªÙ…Ø¯Ø©'}
                        </span></p>
                        
                        ${request.status === 'pending' ? `
                            <div style="margin-top: 10px;">
                                <button onclick="approveRequest('${request.requestId}')" style="background: green; color: white; padding: 8px 15px; border: none; border-radius: 5px; margin-right: 10px;">
                                    âœ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
                                </button>
                                <button onclick="rejectRequest('${request.requestId}')" style="background: red; color: white; padding: 8px 15px; border: none; border-radius: 5px;">
                                    âŒ Ø§Ù„Ø±ÙØ¶
                                </button>
                                <button onclick="requestMoreInfo('${request.requestId}')" style="background: orange; color: white; padding: 8px 15px; border: none; border-radius: 5px; margin-right: 10px;">
                                    â„¹ï¸ Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
                container.innerHTML += requestCard;
            });
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
        function approveRequest(requestId) {
            if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨ ${requestId}ØŸ`)) {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©
                const requestKey = `biyala_seller_application_${requestId}`;
                const request = JSON.parse(localStorage.getItem(requestKey));
                request.status = 'approved';
                request.approvedAt = new Date().toISOString();
                localStorage.setItem(requestKey, JSON.stringify(request));

                // ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ø¨Ø§Ø¦Ø¹
                localStorage.setItem('biyala_seller_application', JSON.stringify(request));

                alert('âœ… ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨!');
                loadPendingRequests();
            }
        }

        // Ø¯Ø§Ù„Ø© Ø§Ù„Ø±ÙØ¶
        function rejectRequest(requestId) {
            const reason = prompt('Ø£Ø¯Ø®Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:');
            if (reason) {
                const requestKey = `biyala_seller_application_${requestId}`;
                const request = JSON.parse(localStorage.getItem(requestKey));
                request.status = 'rejected';
                request.rejectedAt = new Date().toISOString();
                request.rejectionReason = reason;
                localStorage.setItem(requestKey, JSON.stringify(request));

                alert('âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨!');
                loadPendingRequests();
            }
        }

        // Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
        function requestMoreInfo(requestId) {
            const infoNeeded = prompt('Ù…Ø§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©ØŸ');
            if (infoNeeded) {
                const requestKey = `biyala_seller_application_${requestId}`;
                const request = JSON.parse(localStorage.getItem(requestKey));
                request.status = 'needs_info';
                request.infoRequested = infoNeeded;
                request.infoRequestedAt = new Date().toISOString();
                localStorage.setItem(requestKey, JSON.stringify(request));

                alert('ğŸ“ ØªÙ… Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©!');
                loadPendingRequests();
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', loadPendingRequests);
    </script>
</body>

</html>