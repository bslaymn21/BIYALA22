<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIYALA - تفاصيل المبيعات</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== CSS RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* نظام الألوان */
            --bg-primary: #0C0F17;
            --bg-secondary: #121522;
            --bg-card: rgba(255, 255, 255, 0.03);
            --text-primary: #E6E6E6;
            --text-secondary: rgba(230, 230, 230, 0.6);
            --text-muted: rgba(230, 230, 230, 0.4);
            --accent-primary: #FF6D1F;
            --accent-hover: #FF8B4A;
            --status-success: #76DE68;
            --status-warning: #FFB347;
            --status-danger: #ED3F27;
            --status-info: #4A90E2;
            
            /* Borders */
            --border-light: rgba(255, 255, 255, 0.06);
            --border-medium: rgba(255, 255, 255, 0.1);
            --border-accent: rgba(255, 109, 31, 0.3);
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.12);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.16);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            
            /* Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-full: 999px;
            
            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --transition-slow: 350ms ease;
        }

        /* ===== BASE TYPOGRAPHY ===== */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
            font-weight: 400;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ===== NAVBAR ===== */
        .seller-navbar {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border-light);
            padding: 0 var(--space-lg);
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        @media (max-width: 768px) {
            .seller-navbar {
                padding: 0 var(--space-md);
                height: 56px;
            }
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-weight: 700;
            font-size: 18px;
            color: var(--accent-primary);
            text-decoration: none;
        }

        .nav-brand i {
            font-size: 24px;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .btn {
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            border: none;
            font-family: inherit;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 14px;
        }

        .btn-primary {
            background-color: var(--accent-primary);
            color: var(--bg-primary);
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
        }

        .btn-secondary {
            background-color: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-light);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-normal);
        }

        .btn-icon:hover {
            background: rgba(255, 255, 255, 0.06);
            color: var(--text-primary);
            border-color: var(--border-medium);
        }

        /* ===== MAIN CONTAINER ===== */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-lg);
        }

        @media (max-width: 768px) {
            .main-container {
                padding: var(--space-md);
            }
        }

        /* ===== PAGE HEADER ===== */
        .page-header {
            margin-bottom: var(--space-xl);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
            flex-wrap: wrap;
            gap: var(--space-md);
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .export-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .period-selector {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-sm);
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .period-btn {
            padding: var(--space-sm) var(--space-md);
            background: transparent;
            border: none;
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 13px;
        }

        .period-btn.active {
            background: rgba(255, 109, 31, 0.1);
            color: var(--accent-primary);
        }

        .period-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
        }

        .custom-date {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            color: var(--text-secondary);
            font-size: 13px;
        }

        /* ===== STATS SUMMARY ===== */
        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            transition: all var(--transition-normal);
        }

        .stat-card:hover {
            border-color: var(--border-medium);
            transform: translateY(-2px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-md);
        }

        .stat-title {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: rgba(255, 109, 31, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
            font-size: 20px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
            margin-bottom: var(--space-sm);
        }

        .stat-change {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 12px;
            font-weight: 500;
        }

        .stat-change.positive {
            color: var(--status-success);
        }

        .stat-change.negative {
            color: var(--status-danger);
        }

        /* ===== CHARTS SECTION ===== */
        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        @media (max-width: 1024px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
        }

        .chart-container {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chart-controls {
            display: flex;
            gap: var(--space-sm);
        }

        .chart-control {
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .chart-control.active {
            background: rgba(255, 109, 31, 0.1);
            color: var(--accent-primary);
            border-color: var(--accent-primary);
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        /* ===== PERFORMANCE GRID ===== */
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .performance-card {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        .performance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .performance-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .view-all {
            color: var(--accent-primary);
            font-size: 13px;
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .view-all:hover {
            color: var(--accent-hover);
        }

        .performance-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .performance-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-sm);
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
        }

        .item-rank {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            background: rgba(255, 109, 31, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-primary);
            font-weight: 600;
        }

        .item-rank.rank-1 {
            background: rgba(255, 215, 0, 0.1);
            color: #FFD700;
        }

        .item-rank.rank-2 {
            background: rgba(192, 192, 192, 0.1);
            color: #C0C0C0;
        }

        .item-rank.rank-3 {
            background: rgba(205, 127, 50, 0.1);
            color: #CD7F32;
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .item-meta {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .item-stats {
            text-align: right;
        }

        .item-value {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .item-change {
            font-size: 11px;
            font-weight: 500;
        }

        /* ===== TIME ANALYSIS ===== */
        .time-analysis {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .time-card {
            text-align: center;
            padding: var(--space-md);
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
        }

        .time-icon {
            font-size: 24px;
            color: var(--accent-primary);
            margin-bottom: var(--space-sm);
        }

        .time-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: var(--space-xs);
        }

        .time-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ===== RECENT ORDERS ===== */
        .recent-orders {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-xl);
            overflow-x: auto;
        }

        .orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: var(--space-md);
        }

        .orders-table th {
            padding: var(--space-md);
            text-align: right;
            font-weight: 600;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-light);
            font-size: 13px;
        }

        .orders-table td {
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-light);
            font-size: 13px;
        }

        .orders-table tr:last-child td {
            border-bottom: none;
        }

        .orders-table tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }

        .order-status {
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 500;
            text-align: center;
        }

        .status-completed {
            background: rgba(118, 222, 104, 0.1);
            color: var(--status-success);
        }

        .status-pending {
            background: rgba(255, 179, 71, 0.1);
            color: var(--status-warning);
        }

        .status-processing {
            background: rgba(74, 144, 226, 0.1);
            color: var(--status-info);
        }

        /* ===== INSIGHTS ===== */
        .insights-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .insight-card {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .insight-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .icon-success {
            background: rgba(118, 222, 104, 0.1);
            color: var(--status-success);
        }

        .icon-warning {
            background: rgba(255, 179, 71, 0.1);
            color: var(--status-warning);
        }

        .icon-info {
            background: rgba(74, 144, 226, 0.1);
            color: var(--status-info);
        }

        .insight-content p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: var(--space-md);
        }

        /* ===== QUICK ACTIONS ===== */
        .quick-actions-bar {
            display: flex;
            justify-content: center;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-2xl);
        }
/* ===== تحسين الرسوم البيانية للشاشات الصغيرة ===== */
@media (max-width: 768px) {
    .charts-section {
        display: flex;
        flex-direction: column;
        gap: var(--space-md);
    }
    
    .chart-container {
        padding: var(--space-md);
    }
    
    .chart-wrapper {
        height: 250px !important;
    }
    
    /* تحسين حجم الخطوط في الرسوم البيانية */
    .chart-container canvas {
        max-height: 220px;
    }
    
    /* تحسين legend للشاشات الصغيرة */
    .chart-container .chart-legend {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-xs);
    }
    
    /* تحسين أزرار التحكم */
    .chart-controls {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .chart-control {
        padding: 4px 8px;
        font-size: 11px;
    }
    
    .chart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-md);
    }
}

/* تحسين خاصة للشاشات الصغيرة جداً */
@media (max-width: 480px) {
    .chart-wrapper {
        height: 200px !important;
    }
    
    .chart-container canvas {
        max-height: 180px;
    }
}
        .quick-action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-normal);
            text-decoration: none;
            color: inherit;
            min-width: 120px;
        }

        .quick-action-btn:hover {
            background: rgba(255, 109, 31, 0.05);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .quick-action-btn i {
            font-size: 24px;
            color: var(--accent-primary);
        }

        .quick-action-btn span {
            font-size: 12px;
            font-weight: 500;
            text-align: center;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            :root {
                --space-lg: 16px;
                --space-xl: 24px;
            }
            
            .stats-summary {
                grid-template-columns: 1fr;
                gap: var(--space-md);
            }
            
            .performance-grid {
                grid-template-columns: 1fr;
            }
            
            .header-top {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .export-actions {
                width: 100%;
                justify-content: flex-end;
            }
            
            .quick-actions-bar {
                flex-wrap: wrap;
            }
            
            .orders-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="seller-navbar">
        <a href="dashboard.html" class="nav-brand">
            <i class="fas fa-chart-line"></i>
            <span>تفاصيل المبيعات</span>
        </a>
        
        <div class="nav-actions">
            <button class="btn btn-secondary" onclick="window.location.href='dashboard.html'">
                <i class="fas fa-arrow-right"></i>
                العودة
            </button>
            <button class="btn-icon" onclick="printReport()" title="طباعة">
                <i class="fas fa-print"></i>
            </button>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Page Header -->
        <div class="page-header">
            <div class="header-top">
                <h1 class="page-title">تفاصيل المبيعات</h1>
                <div class="export-actions">
                    <button class="btn btn-secondary" onclick="exportToExcel()">
                        <i class="fas fa-file-excel"></i>
                        Excel
                    </button>
                    <button class="btn btn-secondary" onclick="exportToPDF()">
                        <i class="fas fa-file-pdf"></i>
                        PDF
                    </button>
                    <button class="btn btn-primary" onclick="scheduleReport()">
                        <i class="fas fa-calendar"></i>
                        جدولة تقرير
                    </button>
                </div>
            </div>
            
            <div class="period-selector">
                <button class="period-btn active" onclick="setPeriod('today')">اليوم</button>
                <button class="period-btn" onclick="setPeriod('week')">هذا الأسبوع</button>
                <button class="period-btn" onclick="setPeriod('month')">هذا الشهر</button>
                <button class="period-btn" onclick="setPeriod('quarter')">هذا الربع</button>
                <button class="period-btn" onclick="setPeriod('year')">هذه السنة</button>
                <div class="custom-date">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="dateRange">10 - 17 ديسمبر 2024</span>
                </div>
            </div>
        </div>

        <!-- Stats Summary -->
        <div class="stats-summary">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">إجمالي المبيعات</div>
                    <div class="stat-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                </div>
                <div class="stat-value" id="totalSales">EGP 45,820</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>+12% عن الأسبوع الماضي</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">عدد الطلبات</div>
                    <div class="stat-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                </div>
                <div class="stat-value" id="ordersCount">128</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>+8 طلبات</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">متوسط سعر الطلب</div>
                    <div class="stat-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                </div>
                <div class="stat-value" id="avgOrderValue">EGP 358</div>
                <div class="stat-change negative">
                    <i class="fas fa-arrow-down"></i>
                    <span>-5% عن الشهر الماضي</span>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">تطور المبيعات</h3>
                    <div class="chart-controls">
                        <button class="chart-control active" onclick="changeChartType('sales', 'daily')">يومي</button>
                        <button class="chart-control" onclick="changeChartType('sales', 'weekly')">أسبوعي</button>
                        <button class="chart-control" onclick="changeChartType('sales', 'monthly')">شهري</button>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">توزيع المبيعات حسب الفئة</h3>
                    <div class="chart-controls">
                        <button class="chart-control active" onclick="changeChartType('category', 'pie')">دائري</button>
                        <button class="chart-control" onclick="changeChartType('category', 'bar')">شريطي</button>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Performance Grid -->
        <div class="performance-grid">
            <!-- Top Products -->
            <div class="performance-card">
                <div class="performance-header">
                    <h3 class="performance-title">
                        <i class="fas fa-trophy"></i>
                        أفضل المنتجات مبيعاً
                    </h3>
                    <a href="products-details.html" class="view-all">عرض الكل</a>
                </div>
                <div class="performance-list" id="topProductsList">
                    <!-- سيتم ملؤها بواسطة JavaScript -->
                </div>
            </div>
            
            <!-- Top Categories -->
            <div class="performance-card">
                <div class="performance-header">
                    <h3 class="performance-title">
                        <i class="fas fa-star"></i>
                        أفضل الفئات أداءً
                    </h3>
                    <a href="#" class="view-all" onclick="viewCategories()">التفاصيل</a>
                </div>
                <div class="performance-list" id="topCategoriesList">
                    <!-- سيتم ملؤها بواسطة JavaScript -->
                </div>
            </div>
        </div>

        <!-- Time Analysis -->
        <div class="time-analysis">
            <div class="performance-header">
                <h3 class="performance-title">
                    <i class="fas fa-clock"></i>
                    تحليل الوقت والأيام
                </h3>
            </div>
            
            <div class="time-grid">
                <div class="time-card">
                    <i class="fas fa-sun time-icon"></i>
                    <div class="time-label">أفضل وقت</div>
                    <div class="time-value">8 - 10 مساءً</div>
                </div>
                
                <div class="time-card">
                    <i class="fas fa-calendar-day time-icon"></i>
                    <div class="time-label">أفضل يوم</div>
                    <div class="time-value">الجمعة</div>
                </div>
                
                <div class="time-card">
                    <i class="fas fa-map-marker-alt time-icon"></i>
                    <div class="time-label">أكثر منطقة مبيعاً</div>
                    <div class="time-value">القاهرة</div>
                </div>
                
                <div class="time-card">
                    <i class="fas fa-mobile-alt time-icon"></i>
                    <div class="time-label">نسبة الموبايل</div>
                    <div class="time-value">78%</div>
                </div>
            </div>
        </div>

        <!-- Recent Orders -->
        <div class="recent-orders">
            <div class="performance-header">
                <h3 class="performance-title">
                    <i class="fas fa-history"></i>
                    أحدث الطلبات
                </h3>
                <a href="orders.html" class="view-all">عرض جميع الطلبات</a>
            </div>
            
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>رقم الطلب</th>
                        <th>العميل</th>
                        <th>المنتجات</th>
                        <th>المبلغ</th>
                        <th>الحالة</th>
                        <th>التاريخ</th>
                    </tr>
                </thead>
                <tbody id="recentOrdersTable">
                    <!-- سيتم ملؤها بواسطة JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Insights -->
        <div class="insights-section">
            <div class="insight-card">
                <div class="insight-header">
                    <div class="insight-icon icon-success">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>معلومات إيجابية</h3>
                </div>
                <div class="insight-content">
                    <p>• المبيعات ارتفعت بنسبة 12% هذا الأسبوع</p>
                    <p>• منتج "تيشيرت قطني" هو الأكثر مبيعاً هذا الشهر</p>
                    <p>• نسبة التحويل من السلة للشراء تحسنت بنسبة 5%</p>
                </div>
            </div>
            
            <div class="insight-card">
                <div class="insight-header">
                    <div class="insight-icon icon-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>تحذيرات</h3>
                </div>
                <div class="insight-content">
                    <p>• متوسط سعر الطلب انخفض بنسبة 5%</p>
                    <p>• 3 منتجات على وشك النفاد من المخزون</p>
                    <p>• مبيعات الجمعة انخفضت هذا الأسبوع</p>
                </div>
            </div>
            
            <div class="insight-card">
                <div class="insight-header">
                    <div class="insight-icon icon-info">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <h3>اقتراحات</h3>
                </div>
                <div class="insight-content">
                    <p>• ضع عروض على المنتجات ذات المبيعات المنخفضة</p>
                    <p>• روج للمنتجات في أوقات الذروة (8-10 مساءً)</p>
                    <p>• أضف خصومات للطلبات فوق 500 جنيه</p>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions-bar">
            <a href="products.html" class="quick-action-btn">
                <i class="fas fa-box"></i>
                <span>إدارة المنتجات</span>
            </a>
            
            <a href="analytics.html" class="quick-action-btn">
                <i class="fas fa-chart-bar"></i>
                <span>تحليلات متقدمة</span>
            </a>
            
            <a href="#" class="quick-action-btn" onclick="generateReport()">
                <i class="fas fa-file-alt"></i>
                <span>تقرير مفصل</span>
            </a>
            
            <a href="customers.html" class="quick-action-btn">
                <i class="fas fa-users"></i>
                <span>تحليل العملاء</span>
            </a>
        </div>
    </main>

    <!-- JavaScript -->
    <script>
        // ===== بيانات تجريبية =====
        const salesData = {
            periods: {
                today: 'اليوم',
                week: 'هذا الأسبوع',
                month: 'هذا الشهر',
                quarter: 'هذا الربع',
                year: 'هذه السنة'
            },
            stats: {
                totalSales: 45820,
                ordersCount: 128,
                avgOrderValue: 358,
                growth: 12,
                ordersGrowth: 8,
                avgOrderGrowth: -5
            },
            topProducts: [
                { id: 1, name: "تيشيرت قطني أبيض", sales: 45, revenue: 5400, growth: 15 },
                { id: 2, name: "كاب رياضي أسود", sales: 28, revenue: 2240, growth: 8 },
                { id: 3, name: "قميص رسمي أزرق", sales: 22, revenue: 4400, growth: 25 },
                { id: 4, name: "ساعة يدوية", sales: 20, revenue: 5000, growth: 5 },
                { id: 5, name: "حذاء رياضي", sales: 18, revenue: 6300, growth: -2 }
            ],
            topCategories: [
                { name: "ملابس رجالية", sales: 85, revenue: 25400, percentage: 55 },
                { name: "إكسسوارات", sales: 48, revenue: 9600, percentage: 21 },
                { name: "ملابس نسائية", sales: 32, revenue: 8000, percentage: 17 },
                { name: "أحذية", sales: 18, revenue: 6300, percentage: 7 }
            ],
            recentOrders: [
                { id: "ORD-1001", customer: "أحمد محمد", products: 2, amount: 680, status: "completed", date: "منذ ساعة" },
                { id: "ORD-1002", customer: "سارة علي", products: 1, amount: 350, status: "pending", date: "منذ 3 ساعات" },
                { id: "ORD-1003", customer: "محمد حسن", products: 3, amount: 1200, status: "processing", date: "منذ 5 ساعات" },
                { id: "ORD-1004", customer: "ريم أحمد", products: 1, amount: 250, status: "completed", date: "منذ يوم" },
                { id: "ORD-1005", customer: "خالد محمود", products: 2, amount: 560, status: "completed", date: "منذ يومين" }
            ],
            salesChartData: {
                daily: {
                    labels: ['8 ص', '10 ص', '12 م', '2 م', '4 م', '6 م', '8 م', '10 م'],
                    data: [1200, 1800, 2200, 1900, 2500, 3200, 4800, 3800]
                },
                weekly: {
                    labels: ['السبت', 'الأحد', 'الإثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة'],
                    data: [5200, 4800, 6200, 5800, 7200, 6800, 9200]
                },
                monthly: {
                    labels: ['أسبوع 1', 'أسبوع 2', 'أسبوع 3', 'أسبوع 4'],
                    data: [15200, 16800, 19200, 14800]
                }
            },
            categoryChartData: {
                labels: ['ملابس رجالية', 'إكسسوارات', 'ملابس نسائية', 'أحذية', 'ديكور'],
                data: [55, 21, 17, 7, 5],
                colors: ['#FF6D1F', '#4A90E2', '#76DE68', '#FFB347', '#9C27B0']
            }
        };

        // ===== المتغيرات =====
        let currentPeriod = 'week';
        let salesChart, categoryChart;

        // ===== تهيئة الصفحة =====
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            initializeCharts();
            updateTopProducts();
            updateTopCategories();
            updateRecentOrders();
            updateDateRange();
        });

        // ===== تهيئة الصفحة =====
        function initializePage() {
            // تحديث الإحصائيات
            document.getElementById('totalSales').textContent = `EGP ${salesData.stats.totalSales.toLocaleString()}`;
            document.getElementById('ordersCount').textContent = salesData.stats.ordersCount;
            document.getElementById('avgOrderValue').textContent = `EGP ${salesData.stats.avgOrderValue}`;
            
            // تحديث نسبة النمو
            document.querySelectorAll('.stat-change')[0].innerHTML = `
                <i class="fas fa-arrow-${salesData.stats.growth >= 0 ? 'up' : 'down'}"></i>
                <span>${salesData.stats.growth >= 0 ? '+' : ''}${salesData.stats.growth}% عن الأسبوع الماضي</span>
            `;
            
            document.querySelectorAll('.stat-change')[2].innerHTML = `
                <i class="fas fa-arrow-${salesData.stats.avgOrderGrowth >= 0 ? 'up' : 'down'}"></i>
                <span>${salesData.stats.avgOrderGrowth >= 0 ? '+' : ''}${salesData.stats.avgOrderGrowth}% عن الشهر الماضي</span>
            `;
            
            // إضافة classes للنمو
            document.querySelectorAll('.stat-change')[0].className = 
                `stat-change ${salesData.stats.growth >= 0 ? 'positive' : 'negative'}`;
            
            document.querySelectorAll('.stat-change')[2].className = 
                `stat-change ${salesData.stats.avgOrderGrowth >= 0 ? 'positive' : 'negative'}`;
        }

        // ===== الرسوم البيانية =====
        function initializeCharts() {
            // Sales Chart
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            salesChart = new Chart(salesCtx, {
                type: 'line',
                data: {
                    labels: salesData.salesChartData.weekly.labels,
                    datasets: [{
                        label: 'المبيعات (EGP)',
                        data: salesData.salesChartData.weekly.data,
                        borderColor: '#FF6D1F',
                        backgroundColor: 'rgba(255, 109, 31, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.6)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.6)'
                            }
                        }
                    }
                }
            });

            // Category Chart
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            categoryChart = new Chart(categoryCtx, {
                type: 'pie',
                data: {
                    labels: salesData.categoryChartData.labels,
                    datasets: [{
                        data: salesData.categoryChartData.data,
                        backgroundColor: salesData.categoryChartData.colors,
                        borderWidth: 1,
                        borderColor: 'rgba(255, 255, 255, 0.1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'left',
                            labels: {
                                color: 'rgba(255, 255, 255, 0.6)',
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        // ===== تحديث أفضل المنتجات =====
        function updateTopProducts() {
            const list = document.getElementById('topProductsList');
            list.innerHTML = salesData.topProducts.map((product, index) => `
                <div class="performance-item">
                    <div class="item-rank rank-${index + 1}">${index + 1}</div>
                    <div class="item-info">
                        <div class="item-name">${product.name}</div>
                        <div class="item-meta">${product.sales} وحدة مباعة</div>
                    </div>
                    <div class="item-stats">
                        <div class="item-value">EGP ${product.revenue.toLocaleString()}</div>
                        <div class="item-change ${product.growth >= 0 ? 'positive' : 'negative'}">
                            ${product.growth >= 0 ? '+' : ''}${product.growth}%
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ===== تحديث أفضل الفئات =====
        function updateTopCategories() {
            const list = document.getElementById('topCategoriesList');
            list.innerHTML = salesData.topCategories.map(category => `
                <div class="performance-item">
                    <div class="item-rank">
                        ${category.percentage}%
                    </div>
                    <div class="item-info">
                        <div class="item-name">${category.name}</div>
                        <div class="item-meta">${category.sales} طلب</div>
                    </div>
                    <div class="item-stats">
                        <div class="item-value">EGP ${category.revenue.toLocaleString()}</div>
                    </div>
                </div>
            `).join('');
        }

        // ===== تحديث أحدث الطلبات =====
        function updateRecentOrders() {
            const table = document.getElementById('recentOrdersTable');
            table.innerHTML = salesData.recentOrders.map(order => `
                <tr>
                    <td><strong>${order.id}</strong></td>
                    <td>${order.customer}</td>
                    <td>${order.products} منتجات</td>
                    <td><strong>EGP ${order.amount}</strong></td>
                    <td>
                        <span class="order-status status-${order.status}">
                            ${order.status === 'completed' ? 'مكتمل' : 
                              order.status === 'pending' ? 'قيد الانتظار' : 
                              'قيد المعالجة'}
                        </span>
                    </td>
                    <td>${order.date}</td>
                </tr>
            `).join('');
        }

        // ===== تغيير الفترة =====
        function setPeriod(period) {
            currentPeriod = period;
            
            // تحديث أزرار الفترة
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // تحديث نطاق التاريخ
            updateDateRange();
            
            // تحديث البيانات (في الواقع سيتم جلب بيانات جديدة)
            updateDataForPeriod(period);
        }

        function updateDateRange() {
            const dateRanges = {
                today: '17 ديسمبر 2024',
                week: '10 - 17 ديسمبر 2024',
                month: '1 - 31 ديسمبر 2024',
                quarter: 'أكتوبر - ديسمبر 2024',
                year: 'يناير - ديسمبر 2024'
            };
            
            document.getElementById('dateRange').textContent = dateRanges[currentPeriod] || dateRanges.week;
        }

        function updateDataForPeriod(period) {
            // في التطبيق الحقيقي: جلب بيانات جديدة من السيرفر
            console.log('جلب بيانات الفترة:', period);
            
            // تحديث الرسوم البيانية
            updateChartForPeriod(period);
            
            // عرض رسالة
            showToast(`تم تحديث البيانات للفترة: ${salesData.periods[period]}`);
        }

        // ===== تغيير نوع الرسم البياني =====
        function changeChartType(chart, type) {
            if (chart === 'sales') {
                // تحديث أزرار التحكم
                document.querySelectorAll('.chart-controls')[0].querySelectorAll('.chart-control').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                // تحديث البيانات
                salesChart.data.labels = salesData.salesChartData[type].labels;
                salesChart.data.datasets[0].data = salesData.salesChartData[type].data;
                salesChart.update();
            } else if (chart === 'category') {
                // تحديث أزرار التحكم
                document.querySelectorAll('.chart-controls')[1].querySelectorAll('.chart-control').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                // تغيير نوع الرسم البياني
                categoryChart.destroy();
                
                const categoryCtx = document.getElementById('categoryChart').getContext('2d');
                categoryChart = new Chart(categoryCtx, {
                    type: type === 'pie' ? 'pie' : 'bar',
                    data: {
                        labels: salesData.categoryChartData.labels,
                        datasets: [{
                            label: 'نسبة المبيعات',
                            data: salesData.categoryChartData.data,
                            backgroundColor: salesData.categoryChartData.colors,
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: type === 'pie' ? 'left' : 'top',
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.6)'
                                }
                            }
                        },
                        scales: type === 'bar' ? {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.6)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.6)'
                                }
                            }
                        } : {}
                    }
                });
            }
        }

        // ===== وظائف التصدير =====
        function exportToExcel() {
            showToast('جاري تحضير ملف Excel...');
            // محاكاة التصدير
            setTimeout(() => {
                showToast('تم تصدير البيانات إلى Excel بنجاح', 'success');
            }, 1500);
        }

        function exportToPDF() {
            showToast('جاري تحضير ملف PDF...');
            // محاكاة التصدير
            setTimeout(() => {
                showToast('تم تصدير البيانات إلى PDF بنجاح', 'success');
            }, 1500);
        }

        function printReport() {
            window.print();
        }

        function scheduleReport() {
            showToast('سيتم فتح جدولة التقارير قريباً', 'info');
        }

        function generateReport() {
            showToast('جاري إنشاء التقرير المفصل...');
            setTimeout(() => {
                showToast('تم إنشاء التقرير بنجاح', 'success');
            }, 2000);
        }

        // ===== وظائف مساعدة =====
        function viewCategories() {
            showToast('سيتم فتح تحليل الفئات التفصيلي');
        }

        function showToast(message, type = 'info') {
            // إنشاء عنصر Toast
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--bg-secondary);
                border: 1px solid var(--border-light);
                border-radius: var(--radius-lg);
                padding: var(--space-md) var(--space-lg);
                display: flex;
                align-items: center;
                gap: var(--space-md);
                box-shadow: var(--shadow-md);
                z-index: 9999;
                animation: toastIn 0.3s ease forwards;
            `;
            
            const icons = {
                success: { icon: 'fas fa-check-circle', color: 'var(--status-success)' },
                error: { icon: 'fas fa-exclamation-circle', color: 'var(--status-danger)' },
                warning: { icon: 'fas fa-exclamation-triangle', color: 'var(--status-warning)' },
                info: { icon: 'fas fa-info-circle', color: 'var(--status-info)' }
            };
            
            const toastType = icons[type] || icons.info;
            
            toast.innerHTML = `
                <i class="${toastType.icon}" style="color: ${toastType.color}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            // إضافة أنيميشن
            const style = document.createElement('style');
            style.textContent = `
                @keyframes toastIn {
                    from { opacity: 0; transform: translate(-50%, -20px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
                @keyframes toastOut {
                    from { opacity: 1; transform: translate(-50%, 0); }
                    to { opacity: 0; transform: translate(-50%, -20px); }
                }
            `;
            document.head.appendChild(style);
            
            setTimeout(() => {
                toast.style.animation = 'toastOut 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>